(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e,t,a){},249:function(e,t,a){},285:function(e,t,a){e.exports=a(493)},290:function(e,t,a){},485:function(e,t,a){},486:function(e,t,a){},487:function(e,t,a){},488:function(e,t,a){},489:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){},492:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),o=a.n(l),s=(a(290),a(32)),i=a(42),c=a(21),u=a(60),m=a(23),p="LOGIN",h="LOGIN_FAIL",d="LOGOUT",g="REGISTER",f="REGISTER_FAIL",b="LOAD_PEOPLE",E="NO_PEOPLE",v="UPDATE_FILTERS",y="dislike",j="like",O="block",k="UPDATE_PROFILE",w="ADD_TAG",C="LOAD_USER",S="ENABLE_FIELD",I="DISABLE_FIELD",x="UPDATE_SUITOR",P="INCR_I",N="ADD_MESSAGE",L="LOAD_MATCHS",M=function(){};var T=a(133),D=a.n(T),F=a(134),R=a.n(F),_=function(e){return localStorage.getItem(e)&&void 0!==!localStorage.getItem(e)?D()(localStorage.getItem(e)):(localStorage.removeItem(e),null)},A={valid:!1,fail:!1,username:{status:!0,message:""},email:{status:!0,message:""},password:{status:!0,message:""},confirm:{status:!0,message:""},lastname:{status:!0,message:""},firstname:{status:!0,message:""},birthday:{status:!0,message:""},other:{status:!0,message:""},type:""},z={filters:{age:[16,120],score:[0,100],location:[0,16e3],param:!1,tags:[]},isLoading:!0,done:!1,data:[]},U=Object(m.a)({},_("jwt"),{loggedIn:function(e){var t=_(e);return!!t&&(!(t.exp<Date.now()/1e3)||(localStorage.removeItem(e),!1))}("jwt"),err:{status:!1,message:""}}),G="ws://localhost:8181/api/ws/",W=G+U.id+"/"+U.id,B={suitorId:-1,url:W,ws:new WebSocket(W),i:0,messages:[]},J={login:U,register:A,people:R.a.merge({},z),app:{profileId:-1,field:null,tagList:[{key:"angular",text:"#Angular",value:"angular"}],user:{access_lvl:1,biography:null,birthday:null,city:null,country:null,email:null,firstname:null,genre:null,geo_allowed:null,img1:null,img2:null,img3:null,img4:null,img5:null,interest:null,lastname:null,latitude:0,longitude:0,name:null,online:null,rating:null,username:null,zip:null,userTags:[]}},messenger:B,matchs:[{NodeIdentity:-1,Labels:["User"],Properties:{access_lvl:0,biography:"",birthday:"",city:"",country:"",email:"",firstname:"",genre:"",geo_allowed:!1,img1:"",img2:"",img3:"",img4:"",img5:"",interest:"",lastname:"",latitude:0,longitude:0,name:"",online:!0,rating:0,username:"",zip:""}}]},H=function(){};var q=function(){};var K=function(){};var Y=function(){};var V=function(){};var Q=Object(u.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(m.a)({},t,{loggedIn:!0,err:{status:!1,message:""}});case h:return{loggedIn:!1,err:t.err};case d:return{loggedIn:!1,err:{status:!1,message:""}};default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return A;case f:return t;default:return e}},people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case y:case O:case v:return Object(m.a)({},t);case E:return{data:[],isLoading:!1,filters:t.filters,done:!1,err:t.err};case b:return{data:t.data,filters:t.filters,isLoading:!1,done:!0};default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(m.a)({},t);case C:return Object(m.a)({},t,{user:Object(m.a)({},t.user,{userTags:t.userTags}),field:null});case I:return Object(m.a)({},t,{field:null});case S:case k:return Object(m.a)({},t);default:return e}},messenger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(m.a)({},t,{suitorId:t.suitorId,type:null});case P:return Object(m.a)({},t,{i:t.i});case N:return Object(m.a)({},t,{messages:t.messages});default:return e}},matchs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return t.data;default:return e}}}),Z=a(251),$=(a(297),[Z.a]),X=Object(u.d)(u.a.apply(void 0,$)),ee=Object(u.e)(function(e,t){return t.type===d&&(e=J),Q(e,t)},J,X),te=a(66);var ae=Object(i.f)(Object(c.b)(function(e){return{login:e.login}})(function(e){var t=e.component,a=Object(te.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return ee.getState().login.loggedIn?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var ne=function(e){var t=e.component,a=Object(te.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return ee.getState().login.loggedIn?r.a.createElement(i.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(t,e)}}))};var re=function(e){e.component;var t=Object(te.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},t,{render:function(e){return ee.getState().login.loggedIn?r.a.createElement(i.a,{to:{pathname:"/home",state:{from:e.location}}}):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},le=a(10),oe=a(9),se=a(13),ie=a(11),ce=a(12),ue=a(502),me=a(8),pe=function(e){var t=new Date(e),a=new Date,n=a.getFullYear(),r=a.getMonth(),l=a.getDate(),o=t.getFullYear(),s=t.getMonth(),i=t.getDate(),c=n-o;return s>r?c--:s===r&&i>l&&c--,c};var he=a(511),de=a(274),ge=a(517),fe=a(503),be=a(504),Ee=a(519),ve=a(514),ye={appName:"42Matcha",api:"http://localhost:8181/api",auth:"http://localhost:8181/auth"},je=function(e,t,a){return function(n){n(Object(m.a)({},e,{type:k,profileId:t,i:a}))}},Oe=function(e,t,a){return function(n){if("file"===Object.keys(t)[0])!function(e,t,a,n){var r=new FormData;r.append("file",t.file);var l={method:"POST",body:r,headers:{Authorization:localStorage.getItem("jwt")}};fetch(ye.api+"/img/"+a,l).then(function(t){switch(t.status){case 201:t.json().then(function(e){});break;case 200:t.json().then(function(t){n(Object(m.a)({},e,{type:C,user:t.user.Properties,tagList:t.tagList}))})}})}(e,t,a,n);else{var r=JSON.stringify(t),l={method:"PUT",headers:{Authorization:localStorage.getItem("jwt")},body:r};fetch(ye.api+"/user/"+a,l).then(function(t){switch(t.status){case 201:t.json().then(function(e){});break;case 200:t.json().then(function(t){n(Object(m.a)({},e,{type:C,user:t.user.Properties,tagList:t.tagList,userTags:t.userTags}))})}})}}},ke=function(e){return function(t){var a={method:"GET",headers:{Authorization:localStorage.getItem("jwt")}};fetch(ye.api+"/user",a).then(function(a){switch(a.status){case 201:case 202:case 203:case 204:break;case 200:a.json().then(function(a){t(Object(m.a)({},e,{type:C,user:a.user.Properties,tagList:a.tagList,userTags:a.userTags}))})}})}},we=function(e,t){return function(a){a(Object(m.a)({},e,{type:S,field:t}))}},Ce=function(e){return function(t){t(Object(m.a)({},e,{type:I}))}},Se=function(e,t,a){return function(n){var r={method:"PUT",body:{},headers:{Authorization:localStorage.getItem("jwt")}};fetch(ye.api+"/people/"+t+"/"+a,r).then(function(t){switch(t.status){case 200:t.json().then(function(t){n(Object(m.a)({},e,{type:a}))});break;case 201:case 202:t.json().then(function(e){})}})}},Ie=function(e,t){return function(a){var n={method:"GET",headers:{Authorization:localStorage.getItem("jwt"),Filters:JSON.stringify(e)}};fetch(ye.api+"/people/"+t,n).then(function(t){switch(t.status){case 201:a({type:E,filters:e});break;case 202:localStorage.removeItem("jwt"),t.json().then(function(e){});break;case 200:t.json().then(function(t){a({type:b,data:t,filters:e})})}})}},xe=function(e,t){return function(a){a(Object(m.a)({},e,{type:v,filters:t}))}},Pe=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={i:0},a.people=function(){return r.a.createElement(r.a.Fragment,null,a.props.people.data.map(function(e,t){return r.a.createElement(he.a,{key:e.NodeIdentity,onClick:function(n){return a.handleClick(n,e.NodeIdentity,t)}},r.a.createElement(de.a,{src:e.Properties.img1,size:"big"}),r.a.createElement(he.a.Content,null,r.a.createElement(he.a.Header,null,e.Properties.username),r.a.createElement(he.a.Meta,null,r.a.createElement("span",{className:"date"},pe(e.Properties.birthday)),r.a.createElement("p",null,e.Properties.firstname," ",e.Properties.lastname))))}))},a.handleClick=a.handleClick.bind(Object(me.a)(a)),e.dispatch(Ie(e.people.filters,"false")),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"handleClick",value:function(e,t,a){this.props.dispatch(je(this.props.app,t,a)),this.props.history.push("/profile")}},{key:"render",value:function(){return this.props.people.done?r.a.createElement(ue.a,{className:"gallery"},r.a.createElement(ge.a,{active:this.props.people.isLoading},r.a.createElement(fe.a,null,"Loading")),r.a.createElement(be.a,null),r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyMobile),r.a.createElement(he.a.Group,{itemsPerRow:1},this.people())),r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyTablet),r.a.createElement(he.a.Group,{itemsPerRow:3},this.people())),r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyComputer),r.a.createElement(he.a.Group,{itemsPerRow:4},this.people()))):r.a.createElement("p",null,this.props.people.err)}}]),t}(n.Component),Ne=Object(i.f)(Object(c.b)(function(e){return{people:e.people,login:e.login,app:e.app}})(Pe)),Le=a(20),Me=a(515),Te=a(516),De=a(510),Fe=a(494),Re=a(190),_e=(a(449),a(147)),Ae=Re.b.Handle,ze=function(e,t){var a=e.value,n=e.dragging,l=e.index,o=Object(te.a)(e,["value","dragging","index"]);return r.a.createElement(_e.a,{prefixCls:"rc-slider-tooltip",overlay:a,visible:n,placement:"top",key:l},r.a.createElement(Ae,Object.assign({value:a},o)))},Ue=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).handleTagsChange=function(e,t){var n=a.props.people.filters;n[t.name]=t.value,a.props.dispatch(xe(a.props.people,n))},a.handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.zut=a.zut.bind(Object(me.a)(a)),a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.state={newtag:"",tags:[]},a.applyFilters=a.applyFilters.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"zut",value:function(e,t){this.props.people.filters[t]=e}},{key:"intervalCol",value:function(e,t,a,n){var l=this;return r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:5},r.a.createElement(Te.a,{as:"h4"},R.a.startCase(e)),r.a.createElement(Re.a,{unit:a,allowCross:!1,defaultValue:[this.props.people.filters[e][0],n],onChange:function(t){return l.zut(t,e)},min:z.filters[e][0],max:z.filters[e][1],step:t,style:{border:"black"},trackStyle:[{backgroundColor:"black"},{backgroundColor:"black"}],handleStyle:[{backgroundColor:"white",borderColor:"red"},{backgroundColor:"white",borderColor:"red"}],railStyle:{backgroundColor:"gray"},handle:ze}))}},{key:"applyFilters",value:function(e){var t=this.props.people.filters;this.props.dispatch(Ie(t,"true"))}},{key:"render",value:function(){var e=this;return r.a.createElement(ve.a,null,r.a.createElement(Me.a,null,r.a.createElement(Me.a.Row,{columns:3},this.intervalCol("age",1,"years",this.props.people.filters.age[1]),this.intervalCol("score",1,"",this.props.people.filters.score[1]),this.intervalCol("location",50,"km",50)),r.a.createElement(Te.a,{as:"h4"},"Tags"),r.a.createElement(Me.a.Row,{columns:3},r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:12},r.a.createElement(De.a,{placeholder:"Tags",fluid:!0,search:!0,multiple:!0,selection:!0,options:this.props.app.tagList,value:this.props.people.filters.tags,name:"tags",onChange:this.handleTagsChange})),r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:4},r.a.createElement(Fe.a,{fluid:!0,color:"green",onClick:function(t){return e.applyFilters(t)}},"Apply Filters")))))}}]),t}(r.a.Component),Ge=Object(i.f)(Object(c.b)(function(e){return{people:e.people,app:e.app}})(Ue)),We=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(Ge,null),r.a.createElement(Ne,null))}}]),t}(r.a.Component),Be=Object(i.f)(Object(c.b)()(We)),Je=a(506),He=a(508),qe=a(507),Ke=a(107),Ye=a(512),Ve=[{key:"01",text:"01",value:1},{key:"02",text:"02",value:2},{key:"03",text:"03",value:3},{key:"04",text:"04",value:4},{key:"05",text:"05",value:5},{key:"06",text:"06",value:6},{key:"07",text:"07",value:7},{key:"08",text:"08",value:8},{key:"09",text:"09",value:9},{key:"10",text:"10",value:10},{key:"11",text:"11",value:11},{key:"12",text:"12",value:12},{key:"13",text:"13",value:13},{key:"14",text:"14",value:14},{key:"15",text:"15",value:15},{key:"16",text:"16",value:16},{key:"17",text:"17",value:17},{key:"18",text:"18",value:18},{key:"19",text:"19",value:19},{key:"20",text:"20",value:20},{key:"21",text:"21",value:21},{key:"22",text:"22",value:22},{key:"23",text:"23",value:23},{key:"24",text:"24",value:24},{key:"25",text:"25",value:25},{key:"26",text:"26",value:26},{key:"27",text:"27",value:27},{key:"28",text:"28",value:28},{key:"29",text:"29",value:29},{key:"30",text:"30",value:30},{key:"31",text:"31",value:31}],Qe=[{key:"01",text:"01",value:1},{key:"02",text:"02",value:2},{key:"03",text:"03",value:3},{key:"04",text:"04",value:4},{key:"05",text:"05",value:5},{key:"06",text:"06",value:6},{key:"07",text:"07",value:7},{key:"08",text:"08",value:8},{key:"09",text:"09",value:9},{key:"10",text:"10",value:10},{key:"11",text:"11",value:11},{key:"12",text:"12",value:12}],Ze=function(){for(var e=[],t=1900;t<2005;t++)e.push({key:t.toString(),text:t.toString(),value:t});return e}(),$e=[{key:"m",text:"Male",value:"male"},{key:"f",text:"Female",value:"female"}],Xe=[{key:"b",text:"Bi",value:"bi"},{key:"he",text:"Hetero",value:"hetero"},{key:"ho",text:"Homo",value:"homo"}],et=a(520),tt=a(521),at=a(505),nt=a(518),rt=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={lat:e.lat,lng:e.lng,zoom:13},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=[this.props.lat,this.props.lng];return r.a.createElement(et.a,{center:e,zoom:this.state.zoom},r.a.createElement(tt.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(at.a,{position:e},r.a.createElement(nt.a,null,"A pretty CSS3 popup. ",r.a.createElement("br",null)," Easily customizable.")))}}]),t}(r.a.Component),lt=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.state={street:"",city:"",state:"",zip:"",country:"",show:!1,lat:0,lng:0,api_id:"",api_code:"",error:!1,errMessage:""},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.geocoder=a.geocoder.bind(Object(me.a)(a)),a.returnError=a.returnError.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(ye.api+"/kwal").then(function(t){t.json().then(function(t){t&&t.map(function(t){return e.setState(Object(Le.a)({},t.name,t.value)),t})})})}},{key:"handleError",value:function(e){var t=this;this.setState({error:!0,errMessage:e}),setTimeout(function(){t.setState({error:!1,errMessage:""})},2e3)}},{key:"returnError",value:function(){return this.state.error?r.a.createElement(Ye.a,{color:"yellow"},this.state.errMessage):null}},{key:"geocoder",value:function(){var e=this,t=function(e){var t="";return e.map(function(e){var a,n;return n=e,t=""===(a=t)?n:""===n?a:a+"+"+n}),t}([this.state.street.split(" ").join("+"),this.state.city.split(" ").join("+"),this.state.state.split(" ").join("+"),this.state.zip.split(" ").join("+"),this.state.country.split(" ").join("+")]);0===t.length?this.handleError("Please fill the form"):fetch("https://geocoder.api.here.com/6.2/geocode.json?app_id=EezmdtOLkZ5krcljUzoQ&app_code=GC4SmycFgOh8QsjPO_ytYQ&searchtext="+t).then(function(t){200===t.status?t.json().then(function(t){if(t.Response.View.length>0){var a=t.Response.View[0].Result[0].Location.DisplayPosition;e.setState({show:!0,lat:a.Latitude,lng:a.Longitude});var n={name:"position",value:a};e.props.hc("",n)}else e.handleError("Sorry but we can't find your address")}):e.handleError("Sorry but we can't find your address")})}},{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(Me.a,{key:"form"},this.state.show?r.a.createElement(Me.a.Column,{mobile:16,tablet:5,computer:5},r.a.createElement(rt,{lng:this.state.lng,lat:this.state.lat})):r.a.createElement(r.a.Fragment,null),r.a.createElement(Me.a.Column,{mobile:16,tablet:6,computer:6},r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{label:"Street Address",fluid:!0,key:1,type:"text",onChange:this.handleChange,name:"street",value:this.state.street})),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{label:"City",fluid:!0,key:1,type:"text",onChange:this.handleChange,name:"city",value:this.state.city})),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{label:"State",fluid:!0,key:1,type:"text",onChange:this.handleChange,name:"state",value:this.state.state})),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{label:"Zip",fluid:!0,key:1,type:"text",onChange:this.handleChange,name:"zip",value:this.state.zip})),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{label:"Country",fluid:!0,key:1,type:"text",onChange:this.handleChange,name:"country",value:this.state.country})),r.a.createElement(be.a,null),r.a.createElement(Me.a.Row,null,r.a.createElement(Fe.a,{fluid:!0,onClick:this.geocoder},"Fetch")),r.a.createElement(be.a,null),r.a.createElement(r.a.Fragment,null,this.returnError()))))}}]),t}(n.Component),ot=function(e){return e.app.user.userTags?e.app.user.userTags.map(function(e){return r.a.createElement("div",{key:e.key},r.a.createElement("p",null,e.text))}):null},st=[{name:"username",title:"Username",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t){return r.a.createElement(Me.a,{key:"grid_username"},r.a.createElement(Me.a.Column,{mobile:16,tablet:6,computer:6},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,type:"password",key:1,onChange:e,name:"old_password",value:t}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:5,computer:5},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"New username")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,type:"text",key:1,onChange:e,name:"new_username",value:t}))))}}],mobile:16,tablet:16,computer:16},{name:"firstname",title:"Firstname",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t){return r.a.createElement(Je.a,{fluid:!0,key:1,onChange:e,name:"firstname",value:t})}}],mobile:16,tablet:16,computer:8},{name:"lastname",title:"Lastname",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t){return r.a.createElement(Je.a,{fluid:!0,key:1,onChange:e,name:"lastname",value:t})}}],mobile:16,tablet:16,computer:8},{name:"biography",title:"Biography",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t){return r.a.createElement(He.a,{key:"form"},r.a.createElement(qe.a,{key:1,onChange:e,name:"biography",value:t,placeholder:"Tell us who you are",style:{minHeight:100}}))}}],mobile:16,tablet:16,computer:16},{name:"email",title:"Email",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t){return r.a.createElement(Me.a,{key:"grid_email"},r.a.createElement(Me.a.Column,{mobile:16,tablet:6,computer:6},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:1,type:"password",onChange:e,name:"old_password",value:t}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:5,computer:5},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"New Email")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:2,type:"email",onChange:e,name:"new_email",value:t}))))}}],mobile:16,tablet:16,computer:16},{name:"password",title:"Password",view:function(e){return null},entries:[{type:function(e,t){return r.a.createElement(Me.a,{key:"grid_password"},r.a.createElement(Me.a.Column,{mobile:16,tablet:6,computer:6},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Old Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:1,type:"password",onChange:e,name:"old_password",value:t}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:5,computer:5},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"New Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:2,type:"password",onChange:e,name:"new_password",value:t}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:5,computer:5},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Confirm Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:3,type:"password",onChange:e,name:"confirm",value:t}))))}}],mobile:16,tablet:16,computer:16},{name:"location",title:"Location",view:function(e){return null},entries:[{type:function(e,t,a){return r.a.createElement(lt,Object.assign({hc:e},a,{key:"address-form"}))}}],mobile:16,tablet:16,computer:16},{name:"genre",title:"Gender",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"gender",mobile:16,tablet:16,computer:8},r.a.createElement(He.a.Select,{fluid:!0,label:a.field.title,options:$e,placeholder:"-",name:a.field.name,onChange:e}))}}],mobile:16,tablet:16,computer:8},{name:"interest",title:"Interest",view:function(e){return r.a.createElement("p",null,e.app.user[e.field.name])},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"interest",mobile:16,tablet:16,computer:8},r.a.createElement(He.a.Select,{fluid:!0,label:a.field.title,options:Xe,placeholder:"-",name:a.field.name,onChange:e}))}}],mobile:16,tablet:16,computer:8},{name:"birthday",title:"Birthday",view:function(e){return r.a.createElement("p",null,function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth(),r=t.getFullYear();return a+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+r}(e.app.user.birthday))},entries:[{type:function(e,t){return r.a.createElement(He.a.Group,{label:"Birthday",key:"birthday"},r.a.createElement(He.a.Select,{fluid:!0,label:"Day",options:Ve,placeholder:"01",name:"day",onChange:e}),r.a.createElement(He.a.Select,{width:16,fluid:!0,label:"Month",options:Qe,placeholder:"01",name:"month",onChange:e}),r.a.createElement(He.a.Select,{fluid:!0,label:"Year",options:Ze,placeholder:"1900",name:"year",onChange:e}))}}],mobile:16,tablet:16,computer:16},{name:"tag",title:"Add a new tag",view:function(e){return null},entries:[{type:function(e,t){return r.a.createElement(Je.a,{fluid:!0,key:1,onChange:e,name:"tag",value:t})}}],mobile:16,tablet:16,computer:16},{name:"usertags",title:"Tags",view:function(e){return r.a.createElement(ot,e)},entries:[{type:function(e,t,a,n){return r.a.createElement(Me.a.Column,{key:"tags",mobile:16,tablet:16,computer:8},r.a.createElement(De.a,{placeholder:"Tags",fluid:!0,search:!0,multiple:!0,selection:!0,options:a.app.tagList,value:a.state.body.tags,name:a.field.name,onChange:n}))}}],mobile:16,tablet:16,computer:16},{name:"img1",title:"Profile Image",view:function(e){return r.a.createElement(it,e)},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"add_tag",mobile:16,tablet:16,computer:8},r.a.createElement(ct,{hfc:a.hfc}))}}],mobile:16,tablet:16,computer:4},{name:"img2",title:"Image 2",view:function(e){return r.a.createElement(it,e)},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"add_tag",mobile:16,tablet:16,computer:8},r.a.createElement(ct,{hfc:a.hfc}))}}],mobile:16,tablet:16,computer:4},{name:"img3",title:"Image 3",view:function(e){return r.a.createElement(it,e)},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"add_tag",mobile:16,tablet:16,computer:8},r.a.createElement(ct,{hfc:a.hfc}))}}],mobile:16,tablet:16,computer:4},{name:"img4",title:"Image 4",view:function(e){return r.a.createElement(it,e)},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"add_tag",mobile:16,tablet:16,computer:8},r.a.createElement(ct,{hfc:a.hfc}))}}],mobile:16,tablet:16,computer:4},{name:"img5",title:"Image 5",view:function(e){return r.a.createElement(it,e)},entries:[{type:function(e,t,a){return r.a.createElement(Me.a.Column,{key:"add_tag",mobile:16,tablet:16,computer:8},r.a.createElement(ct,{hfc:a.hfc}))}}],mobile:16,tablet:16,computer:4}],it=function(e){return r.a.createElement(de.a,{src:e.app.user[e.field.name],size:"medium"})},ct=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke.a,{as:"label",basic:!0,htmlFor:"upload"},r.a.createElement(Fe.a,{icon:"upload",label:{basic:!0,content:"Select file(s)"},labelPosition:"right"}),r.a.createElement("input",{accept:"image/x-png,image/gif,image/jpeg",hidden:!0,id:"upload",multiple:!0,type:"file",onChange:e.hfc})))},ut=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,null,r.a.createElement(Me.a,null,r.a.createElement(Me.a.Column,{mobile:8,tablet:10,computer:9},r.a.createElement(Te.a,{as:"h3"},e.field.title)),r.a.createElement(Me.a.Column,{mobile:8,tablet:6,computer:7},r.a.createElement(Fe.a,{fluid:!0,onClick:function(t){return e.modify(t,e.field.name)}},"Modify"))),r.a.createElement(be.a,null),e.app.field===e.field.name?r.a.createElement(r.a.Fragment,null,e.field.entries.map(function(t){return t.type(e.handleChange,e.field.state,e,e.htc)}),r.a.createElement(be.a,null),r.a.createElement(Fe.a,{fluid:!0,basic:!0,color:"green",onClick:function(t){return e.save(t,e.field.name)}},"Save")):r.a.createElement(r.a.Fragment,null,e.field.view(e))))},mt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{color:e.color},r.a.createElement("p",null,e.text)))},pt=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).save=function(e){a.props.dispatch(Oe(a.props.app,a.state.body,a.state.name,a.handleChange))},a.modify=function(e,t){a.setState({body:{tags:a.state.tags},name:t}),a.props.app.field===t?a.props.dispatch(Ce(a.props.app)):a.props.dispatch(we(a.props.app,t))},a.handleChange=function(e,t){a.setState({body:Object(m.a)({},a.state.body,Object(Le.a)({},t.name,t.value))})},a.handleFileChange=function(e){a.setState({body:{file:e.target.files[0]}})},a.handleTagChange=function(e,t){a.setState({body:{tags:t.value}})},a.state={name:null,body:{tags:e.app.user.userTags},done:!1,error:!1},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.save=a.save.bind(Object(me.a)(a)),a.modify=a.modify.bind(Object(me.a)(a)),e.dispatch(ke(e.app)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=[];this.props.user&&(this.props.app.user.userTags.map(function(t){return e.push(t.key),t}),this.setState({body:{tags:e}}))}},{key:"error",value:function(){if(this.state.error)return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt,{color:"red",text:this.state.msg}))}},{key:"done",value:function(){if(this.state.done)return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt,{color:"green",text:this.state.msg}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"user"},this.error(),this.done(),r.a.createElement(Me.a,null,st.map(function(t){return r.a.createElement(Me.a.Column,{key:t.name,mobile:t.mobile,tablet:t.tablet,computer:t.computer},r.a.createElement(ut,Object.assign({},e.props,{handleChange:e.handleChange,hfc:e.handleFileChange,htc:e.handleTagChange,save:e.save,modify:e.modify,state:e.state,field:t})))}))))}}]),t}(r.a.Component),ht=Object(i.f)(Object(c.b)(function(e){return{login:e.login,people:e.people,app:e.app}})(pt)),dt=a(81),gt=function(e){return r.a.createElement(r.a.Fragment,null,e.online?r.a.createElement("div",{style:{display:"inline"}},r.a.createElement("p",null,r.a.createElement(dt.a,{name:"circle",color:"teal"})," Online")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Last seen: ",function(e){e=new Date(e);var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(e.lastConn)," ago")))},ft=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).dislike=function(){a.props.dispatch(Se(a.props.people,a.props.people.data[a.props.app.i].NodeIdentity,y)),a.setState({profile:Object(m.a)({},a.state.profile,{relation:"DISLIKE"})})},a.like=function(){a.props.dispatch(Se(a.props.people,a.props.people.data[a.props.app.i].NodeIdentity,j)),a.setState({profile:Object(m.a)({},a.state.profile,{relation:"LIKE"})})},a.block=function(){a.props.dispatch(Se(a.props.people,a.props.people.data[a.props.app.i].NodeIdentity,O)),a.setState({profile:Object(m.a)({},a.state.profile,{relation:"BLOCK"})})},-1===e.app.profileId?(e.history.push("/home"),a.state={loaded:!1}):(a.state={loaded:!0,profile:e.people.data[e.app.i].Properties},fetch(ye.api+"/visit/"+e.app.profileId,{method:"PUT",headers:{Authorization:localStorage.getItem("jwt")}})),a.dislike=a.dislike.bind(Object(me.a)(a)),a.like=a.like.bind(Object(me.a)(a)),a.block=a.block.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e="ws://localhost:8181/api/online/websocket/"+this.props.app.profileId,t=new WebSocket(e),a=this;t.onopen=function(e){t.onmessage=function(e){var t=e.data;t=JSON.parse(t),a.setState({profile:Object(m.a)({},a.state.profile,{online:t})})}},this.setState({socket:t})}},{key:"componentWillUnmount",value:function(){this.state.socket&&this.state.socket.close()}},{key:"render",value:function(){var e=this.state.profile;return this.state.loaded?r.a.createElement(ue.a,{className:"profile"},r.a.createElement(Me.a,null,r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:16},r.a.createElement(ve.a,null,r.a.createElement(Me.a,null,r.a.createElement(Me.a.Column,{style:{padding:"3px"},mobile:16,tablet:6,computer:6},r.a.createElement("p",null,e.ilike?"Vous a d\xe9j\xe0 lik\xe9":"")),r.a.createElement(Me.a.Column,{style:{padding:"3px"},mobile:16,tablet:6,computer:6},r.a.createElement(Te.a,{as:"h3"},"Score ",e.rating,"/100")),r.a.createElement(Me.a.Column,{style:{padding:"3px"},mobile:16,tablet:4,computer:4},r.a.createElement(gt,{online:e.online,lastConn:e.last_conn}))))),r.a.createElement(be.a,{vertical:!0}),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement(de.a,{circular:!0,size:"medium",src:e.img1})),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(ve.a,null,r.a.createElement(Me.a,null,r.a.createElement(Me.a.Row,{mobile:16,tablet:16,computer:16},r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Te.a,{as:"h2"},e.name)),r.a.createElement(Me.a.Column,{mobile:16,tablet:4,computer:5},r.a.createElement(Te.a,{as:"h3"},e.firstname," ",e.lastname)),r.a.createElement(Me.a.Column,{mobile:16,tablet:4,computer:3},r.a.createElement(Te.a,{as:"h4"},pe(e.birthday)," years"))),r.a.createElement(Me.a.Row,{mobile:16,tablet:16,computer:16},r.a.createElement(Fe.a.Group,{fluid:!0},r.a.createElement(Fe.a,{disabled:"BLOCK"===e.relation,color:"red",onClick:this.block},r.a.createElement(dt.a,{name:"ban"})),r.a.createElement(Fe.a.Or,null),r.a.createElement(Fe.a,{disabled:"DISLIKE"===e.relation,color:"yellow",onClick:this.dislike},r.a.createElement(dt.a,{name:"thumbs down"})),r.a.createElement(Fe.a.Or,null),r.a.createElement(Fe.a,{disabled:"LIKE"===e.relation,color:"green",onClick:this.like},r.a.createElement(dt.a,{name:"heart"})))),r.a.createElement(Me.a.Row,{mobile:16,tablet:16,computer:16},r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Te.a,{as:"h3"},e.genre)),r.a.createElement(Me.a.Column,{mobile:16,tablet:4,computer:5},r.a.createElement(Te.a,{as:"h3"},e.interest," ")))))),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement("p",null,e.biography)),r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:16},r.a.createElement(ve.a,null,r.a.createElement(Me.a,null,r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement(de.a,{size:"big",src:e.img2})),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement(de.a,{size:"big",src:e.img3})),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement(de.a,{size:"big",src:e.img4})),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:4},r.a.createElement(de.a,{size:"big",src:e.img5})))))),r.a.createElement(ve.a,null,r.a.createElement(Fe.a,{fluid:!0,color:"red"},"Signaler le profil"))):null}}]),t}(r.a.Component),bt=Object(i.f)(Object(c.b)(function(e){return{login:e.login,app:e.app,people:e.people}})(ft)),Et=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.handleToggle=function(e,t){a.setState(Object(Le.a)({},t.name,t.checked))},a.state={username:"",email:"",password:"",confirm:"",firstname:"",lastname:"",gender:"",interest:"",geo:!1,day:1,month:1,year:1900},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.submit=a.submit.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"submit",value:function(e){e.preventDefault();var t=new FormData;t.append("username",this.state.username),t.append("password",this.state.password),ee.dispatch(function(e,t){return function(a){fetch(ye.auth+"/login",{method:"POST",body:e,credentials:"same-origin"}).then(function(e){switch(e.status){case 201:e.json().then(function(e){a({type:h,err:{status:!0,message:e.err}})});break;case 200:e.json().then(function(e){localStorage.setItem("jwt",e);var n=D()(e);a(Object(m.a)({},n,{type:p})),t.push("/")})}})}}(t,this.props.history))}},{key:"alertMessage",value:function(e,t){return e?r.a.createElement(Ye.a,{negative:!0,attached:"bottom"},t):null}},{key:"render",value:function(){var e=this.props.login;return r.a.createElement(r.a.Fragment,null,r.a.createElement("style",null,"\n      body > div,\n      body > div > div,\n      body > div > div > div.login-form {\n        height: 80%;\n      margin-top: 20px;\n      }\n    "),r.a.createElement("div",{className:"login-form"},r.a.createElement(Me.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(Me.a.Column,{style:{maxWidth:450}},r.a.createElement(Te.a,{as:"h2",color:"pink",textAlign:"center"},r.a.createElement(de.a,{src:"/logo.png"})," Login"),r.a.createElement(He.a,{size:"large"},r.a.createElement(ve.a,{stacked:!0},r.a.createElement(He.a.Input,{fluid:!0,label:"Username",icon:"user",type:"text",iconPosition:"left",placeholder:"Username",name:"username",value:this.state.username,error:e.err.status,onChange:this.handleChange}),r.a.createElement(He.a.Input,{fluid:!0,label:"Password",icon:"lock",iconPosition:"left",placeholder:"********",type:"password",name:"password",value:this.state.password,error:e.err.status,onChange:this.handleChange}),r.a.createElement(Fe.a,{color:"pink",fluid:!0,size:"large",onClick:this.submit},"Login"))),this.alertMessage(e.err.status,e.err.message),r.a.createElement(Ye.a,null,"Not registered? ",r.a.createElement("a",{href:"/register"},"Sign Up")),r.a.createElement(Ye.a,null,"Forgot Password? ",r.a.createElement("a",{href:"/forgot"},"Click Here"))))))}}]),t}(n.Component),vt=Object(i.f)(Object(c.b)(function(e){return{login:e.login}})(Et)),yt=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.handleToggle=function(e,t){a.setState(Object(Le.a)({},t.name,t.checked))},a.state={username:"",email:"",password:"",confirm:"",firstname:"",lastname:"",geo:!1},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.submit=a.submit.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"submit",value:function(e){e.preventDefault();var t=new FormData(e.target);t.append("username",this.state.username),t.append("email",this.state.email),t.append("password",this.state.password),t.append("confirm",this.state.confirm),t.append("firstname",this.state.firstname),t.append("lastname",this.state.lastname),ee.dispatch(function(e,t){return function(a){fetch(ye.auth+"/register",{method:"POST",body:e,credentials:"same-origin"}).then(function(e){switch(e.status){case 201:e.json().then(function(e){a(e)});break;case 200:e.json().then(function(e){a({type:g,data:e}),t.push("/")})}})}}(t,this.props.history))}},{key:"alertMessage",value:function(e,t){return e?r.a.createElement(Ye.a,{negative:!0,size:"mini"},t):null}},{key:"render",value:function(){var e=this.props.register;return r.a.createElement(r.a.Fragment,null,r.a.createElement("style",null,"\n      body > div,\n      body > div > div,\n      body > div > div > div.register-form {\n      margin-top: 20px;\n        height: 80%;\n      }\n    "),r.a.createElement("div",{className:"register-form"},r.a.createElement(Me.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(Me.a.Column,{style:{maxWidth:450}},r.a.createElement(Te.a,{as:"h2",color:"pink",textAlign:"center"},r.a.createElement(de.a,{src:"/logo.png"})," Create your account"),r.a.createElement(He.a,{size:"large"},r.a.createElement(ve.a,{stacked:!0},r.a.createElement(He.a.Input,{fluid:!0,label:"Username",icon:"user",iconPosition:"left",placeholder:"Username",type:"text",name:"username",value:this.state.username,error:!e.username.status,onChange:this.handleChange}),this.alertMessage(!e.username.status,e.username.message),r.a.createElement(He.a.Input,{fluid:!0,label:"Email",icon:"mail",iconPosition:"left",placeholder:"Email",name:"email",value:this.state.email,type:"email",error:!e.email.status,onChange:this.handleChange}),this.alertMessage(!e.email.status,e.email.message),r.a.createElement(He.a.Group,null,r.a.createElement(He.a.Input,{width:8,fluid:!0,label:"Password",icon:"lock",iconPosition:"left",placeholder:"Password",name:"password",value:this.state.password,type:"password",error:!e.password.status,onChange:this.handleChange}),r.a.createElement(He.a.Input,{width:8,fluid:!0,label:"Confirm",icon:"lock",iconPosition:"left",placeholder:"Password",name:"confirm",value:this.state.confirm,type:"password",error:!e.confirm.status,onChange:this.handleChange})),this.alertMessage(!e.confirm.status||!e.password.status,e.password.message+e.confirm.message),r.a.createElement(He.a.Group,null,r.a.createElement(He.a.Input,{width:8,fluid:!0,label:"Firstname",icon:"user",iconPosition:"left",type:"text",placeholder:"Firstname",name:"firstname",value:this.state.firstname,error:!e.firstname.status,onChange:this.handleChange}),r.a.createElement(He.a.Input,{width:8,fluid:!0,label:"Lastname",icon:"user",iconPosition:"left",placeholder:"Lastname",name:"lastname",value:this.state.lastname,type:"text",error:!e.lastname.status,onChange:this.handleChange})),this.alertMessage(!e.lastname.status||!e.firstname.status,e.lastname.message+e.firstname.message),r.a.createElement(Fe.a,{color:"pink",fluid:!0,size:"large",onClick:this.submit},"Register"))),r.a.createElement(Ye.a,null,"Already registered? ",r.a.createElement("a",{href:"/login"},"Sign In"))))))}}]),t}(n.Component),jt=Object(i.f)(Object(c.b)(function(e){return{register:e.register}})(yt)),Ot=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"redirect",value:function(e){setTimeout(function(){e.history.push("/")},2e3)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"You are not authorized"),r.a.createElement("h4",null,"...Redirecting"),this.redirect(this.props))}}]),t}(n.Component),kt=Object(i.f)(Object(c.b)(function(e){return{}},null)(Ot)),wt=a(188),Ct=a.n(wt),St=a(268),It=a(148),xt=a(509),Pt=a(513),Nt=function(e){return r.a.createElement(Me.a.Row,null,r.a.createElement(Me.a,{columns:2},r.a.createElement(Me.a.Column,{width:13},r.a.createElement(Te.a,{as:"h4"},e.notif.message)),r.a.createElement(Me.a.Column,{width:3,textAlign:"center"},r.a.createElement(Fe.a,{circular:!0,icon:!0,negative:!0,onClick:function(t){return e.deleteMe(e.notif.id,t)}},r.a.createElement(dt.a,{name:"delete"})))),r.a.createElement(be.a,null))},Lt=function(e){function t(e){var a;Object(le.a)(this,t);var n=new WebSocket("ws://localhost:8181/api/notifications/websocket/"+e.login.id);n.onopen=function(e){n.onmessage=function(e){var t=e.data;t=JSON.parse(t),a.setState({isOpen:!1,tab:[{id:t.id,author:t.author_id,message:t.message,subject:t.subject_id}].concat(Object(It.a)(a.state.tab))})}};var r={method:"GET",headers:{Authorization:localStorage.getItem("jwt")}};return fetch(ye.api+"/notifications/history/"+e.login.id,r).then(function(e){201===e.status||202===e.status||203===e.status||204===e.status||200===e.status&&e.json().then(function(e){var t=[];e.map(function(e){return t.push({id:e.id,author:e.author_id,message:e.message,subject:e.subject_id}),a.setState({tab:t}),e})})}),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).deleteMe=function(e,t){t.preventDefault(),a.state.tab.length<2&&a.setState({isOpen:!1}),a.setState({tab:a.state.tab.filter(function(t){return t.id!==e})}),fetch(ye.api+"/notifications/"+e,{method:"DELETE"})},a.handleOpen=function(){a.state.tab.length>0&&a.setState({isOpen:!0})},a.handleClose=function(){a.setState({isOpen:!1}),clearTimeout(a.timeout)},a.state={tab:[],socket:n},a.deleteMe=a.deleteMe.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentWillUnmount",value:function(){this.state.socket&&this.state.socket.close()}},{key:"render",value:function(){var e=this;return r.a.createElement(xt.a,{on:"click",open:this.state.isOpen,onClose:this.handleClose,onOpen:this.handleOpen,trigger:r.a.createElement(Pt.a.Item,{header:!0},r.a.createElement(dt.a,{color:0===this.state.tab.length?"black":"red",name:"bell"})),position:"bottom right",flowing:!0},r.a.createElement(Me.a,{centered:!0,divided:!0,columns:1},r.a.createElement(ue.a,null,this.state.tab.map(function(t,a){return r.a.createElement(Nt,Object.assign({deleteMe:e.deleteMe,key:a,notif:t},e.props))}))))}}]),t}(r.a.Component),Mt=Object(i.f)(Object(c.b)(function(e){return{login:e.login,people:e.people}})(Lt)),Tt=Object(i.f)(Object(c.b)(function(e){return{login:e.login,app:e.app}})(function(e){return r.a.createElement(Pt.a,{fluid:!0,widths:5,pointing:!0,secondary:!0,icon:e.icon,size:"huge"},r.a.createElement(Pt.a.Item,{header:!0,active:"/home"===e.location.pathname,onClick:function(){return e.history.push("/home")}},e.buttons.home.name()),r.a.createElement(Pt.a.Item,{header:!0,active:"/messenger"===e.location.pathname,onClick:function(){return e.history.push("/messenger")}},r.a.createElement(dt.a,{disabled:"/messenger"===e.location.pathname,name:"chat"}),e.buttons.messenger.name),r.a.createElement(De.a,{trigger:(t=e.app.user.img1,e.app.user.username,r.a.createElement("span",null,r.a.createElement(de.a,{size:"mini",avatar:!0,src:t}))),item:!0},r.a.createElement(De.a.Menu,null,r.a.createElement(De.a.Item,{active:"/user"===e.location.pathname,onClick:function(){return e.history.push("/user")}},e.app.user.username),r.a.createElement(De.a.Item,{active:"/matchs"===e.location.pathname,onClick:function(){return e.history.push("/matchs")}},"Matchs"),r.a.createElement(De.a.Item,{active:"/history"===e.location.pathname,onClick:function(){return e.history.push("/history")}},"History"))),r.a.createElement(Mt,null),r.a.createElement(Pt.a.Item,{header:!0,onClick:function(){return e.dispatch((t=e.history,function(e){localStorage.removeItem("jwt"),e({type:d}),t.push("/")}));var t}},r.a.createElement(dt.a,{name:"log out"}),e.buttons.logout.name));var t})),Dt={home:{name:function(){return r.a.createElement(Me.a,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(Me.a.Column,null,r.a.createElement(de.a,{style:{width:17},src:"/logo.png"})))}},user:{name:""},messenger:{name:""},notifications:{name:"Messenger"},logout:{name:""},size:"small",sizeActive:"big"},Ft={home:{name:function(){return r.a.createElement(Me.a,{textAlign:"center",rows:2},r.a.createElement(Me.a.Row,{style:{padding:0},height:10},r.a.createElement(de.a,{style:{height:34},src:"/logo.png"})),r.a.createElement(Me.a.Row,{style:{paddingTop:0},height:10},r.a.createElement(de.a,{style:{height:17},src:"/title.png"})))}},user:{name:"User"},notifications:{name:"Notifications"},messenger:{name:"Messenger"},logout:{name:"Logout"},size:"small",sizeActive:"big"},Rt=a(273),_t=a.n(Rt),At=function(e,t){fetch(ye.api+"/user/position",{headers:{Authorization:localStorage.getItem("jwt")},method:"PUT",body:JSON.stringify({type:e,position:t}),credentials:"same-origin"})},zt=function(e){function t(e){var a;return Object(le.a)(this,t),a=Object(se.a)(this,Object(ie.a)(t).call(this,e)),e.login.loggedIn&&!e.app.user.name&&e.dispatch(ke(e.app)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentWillUpdate",value:function(e,t,a){(!this.props.login.loggedIn&&e.login.loggedIn||!this.props.app.user.name)&&this.props.dispatch(ke(this.props.app))}},{key:"componentDidMount",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.updatePosition,this.geoDeniedPosition)}},{key:"updatePosition",value:function(e){At("gps",{lat:e.coords.latitude,long:e.coords.longitude})}},{key:"geoDeniedPosition",value:function(e){e.code===e.PERMISSION_DENIED&&Object(St.a)(Ct.a.mark(function e(){return Ct.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=At,e.next=3,_t.a.v4();case 3:e.t1=e.sent,(0,e.t0)("ip",e.t1);case 5:case"end":return e.stop()}},e)}))()}},{key:"render",value:function(){return this.props.login.loggedIn?r.a.createElement("div",null,r.a.createElement(Ee.a,Ee.a.onlyMobile,r.a.createElement(Tt,{buttons:Dt,name:"",mobile:!0})),r.a.createElement(Ee.a,Ee.a.onlyTablet,r.a.createElement(Tt,{buttons:Ft,name:this.props.login.username,icon:"labeled"})),r.a.createElement(Ee.a,Ee.a.onlyComputer,r.a.createElement(Tt,{buttons:Ft,name:this.props.login.username,icon:"labeled"}))):null}}]),t}(n.Component),Ut=Object(i.f)(Object(c.b)(function(e){return{login:e.login,app:e.app,people:e.people,messenger:e.messenger,matchs:e.matchs}})(zt));function Gt(e){e||(e=window.location.search);var t=e.substr(1),a={};return t.split("&").forEach(function(e){var t=e.split("=");a[t[0]]=decodeURIComponent(t[1])}),a}var Wt=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={message:"",class:""},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=Gt(this.props.location.search);fetch("/auth/valid_email/"+t.token).then(function(t){200===t.status?e.setState({message:"Email successfully activated",class:" is-info"}):401===t.status&&t.json().then(function(t){e.setState({message:t.err,class:" is-danger"})})}),setTimeout(function(){e.props.history.push("/")},2e3)}},{key:"snack",value:function(){return r.a.createElement("div",{id:"snackbar",className:"snackbar valid-email"},r.a.createElement("article",{className:"message  "+this.state.class},r.a.createElement("div",{className:"message-body"},r.a.createElement("p",null,this.state.message))))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.snack())}}]),t}(n.Component),Bt=Object(i.f)(Object(c.b)()(Wt)),Jt=(a(485),a(486),function(e,t,a){return function(n){var r={method:"GET",headers:{Authorization:localStorage.getItem("jwt"),"User-Id":a,"Suitor-Id":t}};fetch(ye.api+"/messages",r).then(function(r){switch(r.status){case 202:localStorage.removeItem("jwt"),r.json().then(function(e){});break;case 201:r.json().then(function(e){});break;case 200:r.json().then(function(r){var l,o,s=G+((l=a)<=(o=t)?l+"/"+o:o+"/"+l);e.ws.close(),n(Object(m.a)({},e,{ws:new WebSocket(s),url:s,type:x,suitorId:t,messages:r,i:r.length}))})}})}}),Ht=function(e){return function(t){t(Object(m.a)({},e,{type:P,i:e.i+1}))}},qt=function(e,t){return function(a){a(Object(m.a)({},e,{type:N,messages:[].concat(Object(It.a)(e.messages),[t])}))}},Kt=function(e){function t(){var e,a;Object(le.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(se.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(l)))).selectSuitor=function(e,t){a.props.dispatch(Jt(a.props.messenger,t,a.props.login.id))},a.people=function(){return r.a.createElement(r.a.Fragment,null,a.props.matchs.map(function(e){return r.a.createElement("div",{className:"conversation-list-item",key:e.NodeIdentity,onClick:function(t){return a.selectSuitor(t,e.NodeIdentity)}},r.a.createElement("img",{className:"conversation-photo",src:e.Properties.img1,alt:"conversation"}),r.a.createElement("div",{className:"conversation-info"},r.a.createElement("h1",{className:"conversation-title"},e.Properties.name)))}))},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return-1===this.props.messenger.suitorId?null:r.a.createElement("div",{className:"conversation-list"},this.people())}}]),t}(n.Component),Yt=Object(i.f)(Object(c.b)(function(e){return{matchs:e.matchs,login:e.login,messenger:e.messenger}})(Kt)),Vt=a(146),Qt=a.n(Vt),Zt=(a(487),function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.isMine,n=e.startsSequence,l=e.endsSequence,o=e.showTimestamp,s=Qt()(t.timestamp).format("LLLL");return r.a.createElement("div",{className:["message","".concat(a?"mine":""),"".concat(n?"start":""),"".concat(l?"end":"")].join(" ")},o&&r.a.createElement("div",{className:"timestamp"},s),r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble",title:s},t.message)))}}]),t}(n.Component)),$t=(a(248),a(56)),Xt=function(){return Math.random().toString(36).substr(2)},ea=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).keyDown=function(e){"Enter"===e.key&&a.send(e)},a.send=function(e){if(/\S/.test(a.state.new)){var t=localStorage.getItem("jwt"),n={id:Xt(),token:t,msg:a.state.new,author:a.props.login.id,timestamp:(new Date).getTime(),to:a.props.messenger.suitorId},r=JSON.stringify(n);a.props.messenger.ws.send(r),a.props.dispatch(Ht(a.props.messenger)),a.setState({new:""})}},a.handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.state={new:""},a.send=a.send.bind(Object(me.a)(a)),a.keyDown=a.keyDown.bind(Object(me.a)(a)),a.handleChange=a.handleChange.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Je.a,{style:{position:"fixed",bottom:"0px",width:"70%"},fluid:!0,placeholder:"Write your message here...",type:"text",name:"new",value:this.state.new,onChange:this.handleChange,onKeyDown:function(t){return e.keyDown(t)},autoComplete:"off",label:{color:"blue",icon:"send",onClick:function(t){return e.send(t)},position:"right"},labelPosition:"right"})}}]),t}(n.Component),ta=Object(i.f)(Object($t.a)(function(e){return{people:e.people,login:e.login,messenger:e.messenger}})(ea)),aa=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).renderMessages=function(){return r.a.createElement(r.a.Fragment,null,a.props.messenger.messages.map(function(e){return r.a.createElement(Zt,{key:e.id,isMine:e.author===a.props.login.id,startsSequence:!0,endsSequence:!1,showTimestamp:!0,data:e})}))},a.state={new:"",i:0},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentWillUpdate",value:function(e,t,a){e.messenger.ws.onmessage=function(t){var a=t.data,n=JSON.parse(a);e.login.id!==n.author&&e.dispatch(Ht(e.messenger));var r={id:n.id,author:n.author,message:n.msg,timestamp:n.timestamp,to:e.people.suitorId};e.dispatch(qt(e.messenger,r))}}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"message-list"},r.a.createElement(ve.a,{className:"message-list-container"},this.renderMessages()),r.a.createElement("div",{style:{padding:"10px"},ref:function(t){e.el=t}}),r.a.createElement(ta,null))}}]),t}(n.Component),na=Object(i.f)(Object($t.a)(function(e){return{people:e.people,login:e.login,messenger:e.messenger}})(aa)),ra=(a(488),function(e,t){return function(a){var n={method:"GET",headers:{Authorization:localStorage.getItem("jwt")}};fetch(ye.api+"/matchs",n).then(function(n){switch(n.status){case 202:localStorage.removeItem("jwt"),n.json().then(function(e){});break;case 201:n.json().then(function(e){});break;case 200:n.json().then(function(n){a({type:L,data:n}),a(Jt(e,n[0].NodeIdentity,t))})}})}}),la=(a(489),a(490),function(e){function t(){var e,a;Object(le.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(se.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(l)))).selectSuitor=function(e,t){a.props.dispatch(Jt(a.props.messenger,t,a.props.login.id)),a.props.toMsgList()},a.people=function(){return r.a.createElement(r.a.Fragment,null,a.props.matchs.map(function(e){return r.a.createElement("div",{className:"conversation-list-item",key:e.NodeIdentity,onClick:function(t){return a.selectSuitor(t,e.NodeIdentity)}},r.a.createElement("img",{className:"conversation-photo",src:e.Properties.img1,alt:"conversation"}),r.a.createElement("div",{className:"conversation-info"},r.a.createElement("h1",{className:"conversation-title"},e.Properties.name)))}))},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"conversation-list"},this.people())}}]),t}(n.Component)),oa=Object(i.f)(Object(c.b)(function(e){return{matchs:e.matchs,login:e.login,messenger:e.messenger}})(la)),sa=(a(491),function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.isMine,n=e.startsSequence,l=e.endsSequence,o=e.showTimestamp,s=Qt()(t.timestamp).format("LLLL");return r.a.createElement("div",{className:["message","".concat(a?"mine":""),"".concat(n?"start":""),"".concat(l?"end":"")].join(" ")},o&&r.a.createElement("div",{className:"timestamp"},s),r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble",title:s},t.message)))}}]),t}(n.Component)),ia=(a(249),function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).keyDown=function(e){"Enter"===e.key&&a.send(e)},a.send=function(e){if(/\S/.test(a.state.new)){var t=localStorage.getItem("jwt"),n={id:a.props.messenger.i+1,token:t,msg:a.state.new,author:a.props.login.id,timestamp:(new Date).getTime(),to:a.props.messenger.suitorId},r=JSON.stringify(n);a.props.messenger.ws.send(r),a.props.dispatch(Ht(a.props.messenger)),a.setState({new:""})}},a.handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.state={new:""},a.send=a.send.bind(Object(me.a)(a)),a.keyDown=a.keyDown.bind(Object(me.a)(a)),a.handleChange=a.handleChange.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Me.a,{style:{position:"fixed",bottom:"0px",width:"100%"}},r.a.createElement(Me.a.Column,null,r.a.createElement(Fe.a,{style:{position:"fixed",bottom:"0px",left:"0px",width:"14%"},icon:"caret left",onClick:function(t){return e.props.toConvList(t)}})),r.a.createElement(Me.a.Column,null,r.a.createElement(Je.a,{style:{position:"fixed",bottom:"0px",width:"86%",right:"0px"},fluid:!0,placeholder:"Write your message here...",type:"text",name:"new",value:this.state.new,onChange:this.handleChange,onKeyDown:function(t){return e.keyDown(t)},autoComplete:"off",label:{color:"blue",icon:"send",onClick:function(t){return e.send(t)},position:"right"},labelPosition:"right"})))}}]),t}(n.Component)),ca=Object(i.f)(Object($t.a)(function(e){return{people:e.people,login:e.login,messenger:e.messenger}})(ia)),ua=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).renderMessages=function(){return r.a.createElement(r.a.Fragment,null,a.props.messenger.messages.map(function(e){return r.a.createElement(sa,{key:e.id,isMine:e.author===a.props.login.id,startsSequence:!0,endsSequence:!1,showTimestamp:!0,data:e})}))},a.state={new:"",i:0},a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.scrollToBottom()},900)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.messenger.ws.onmessage=function(t){var a=t.data,n=JSON.parse(a);e.props.login.id!==n.author&&e.props.dispatch(Ht(e.props.messenger));var r={id:n.id,author:n.author,message:n.msg,timestamp:n.timestamp,to:e.props.people.suitorId};e.props.dispatch(qt(e.props.messenger,r))},this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"message-list"},r.a.createElement(ve.a,{className:"message-list-container"},this.renderMessages()),r.a.createElement("div",{style:{padding:"14px"},ref:function(t){e.el=t}}),r.a.createElement(ca,{toConvList:this.props.toConvList}))}}]),t}(n.Component),ma=Object(i.f)(Object($t.a)(function(e){return{people:e.people,login:e.login,messenger:e.messenger}})(ua)),pa=(a(492),function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={convList:!0},a.toConvList=a.toConvList.bind(Object(me.a)(a)),a.toMsgList=a.toMsgList.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"toConvList",value:function(){this.setState({convList:!0})}},{key:"toMsgList",value:function(){this.setState({convList:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"messenger-mobile"},this.state.convList?r.a.createElement("div",{className:"scrollable sidebar"},r.a.createElement(oa,{toMsgList:this.toMsgList})):r.a.createElement("div",{className:"scrollable content"},r.a.createElement(ma,{toConvList:this.toConvList})))}}]),t}(n.Component)),ha=Object(i.f)(Object(c.b)(function(e){return{people:e.people,login:e.login,messenger:e.messenger,matchs:e.matchs}})(pa)),da=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){ee.dispatch(ra(this.props.messenger,this.props.login.id))}},{key:"componentWillMount",value:function(){document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.style.overflow=""}},{key:"render",value:function(){var e=this;return-1===this.props.messenger.suitorId?r.a.createElement(ue.a,null,r.a.createElement(ve.a,null,r.a.createElement(Ye.a,{error:!0,header:"You don't have any match yet",onClick:function(){return e.props.history.push("/")}}),r.a.createElement(Fe.a,{onClick:function(){return e.props.history.push("/")}},"Go back home"))):r.a.createElement("div",null,r.a.createElement(Ee.a,Ee.a.onlyMobile,r.a.createElement(ha,{mobile:!0})),r.a.createElement(Ee.a,Ee.a.onlyTablet,r.a.createElement("div",{className:"messenger"},r.a.createElement("div",{className:"scrollable sidebar"},r.a.createElement(Yt,null)),r.a.createElement("div",{className:"scrollable content"},r.a.createElement(na,null)))),r.a.createElement(Ee.a,Ee.a.onlyComputer,r.a.createElement("div",{className:"messenger"},r.a.createElement("div",{className:"scrollable sidebar"},r.a.createElement(Yt,null)),r.a.createElement("div",{className:"scrollable content"},r.a.createElement(na,null)))))}}]),t}(n.Component),ga=Object(i.f)(Object(c.b)(function(e){return{people:e.people,login:e.login,messenger:e.messenger,matchs:e.matchs}})(da)),fa=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.submit=function(e){e.preventDefault();var t=new FormData(e.target);t.append("username",a.state.username),fetch(ye.api+"/send_token",{method:"POST",body:t}),a.setState({done:!0})},a.state={username:"",done:!1},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.submit=a.submit.bind(Object(me.a)(a)),a.message=a.message.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"message",value:function(){var e=this;if(this.state.done)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,null,r.a.createElement(ve.a,null,r.a.createElement(Ye.a,null,r.a.createElement("p",null,"An email has been send to change your password.")),r.a.createElement(Fe.a,{onClick:function(t){return e.props.history.push("/")}},"Login"))))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.message(),r.a.createElement(ue.a,null,r.a.createElement(ve.a,null,r.a.createElement(Je.a,{fluid:!0,icon:"user",type:"text",iconPosition:"left",placeholder:"Username",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(Fe.a,{color:"teal",onClick:this.submit},"Change Password"))))}}]),t}(n.Component),ba=Object(i.f)(Object(c.b)(function(e){return{}})(fa)),Ea=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={i:0},a.matchs=function(){return r.a.createElement(r.a.Fragment,null,a.props.matchs.map(function(e,t){return r.a.createElement(he.a,{key:e.NodeIdentity,onClick:function(n){return a.handleClick(n,e.NodeIdentity,t)}},r.a.createElement(de.a,{src:e.Properties.img1,size:"big"}),r.a.createElement(he.a.Content,null,r.a.createElement(he.a.Header,null,e.Properties.username),r.a.createElement(he.a.Meta,null,r.a.createElement("span",{className:"date"},pe(e.Properties.birthday).toString()),r.a.createElement("p",null,e.Properties.firstname," ",e.Properties.lastname))))}))},a.handleClick=a.handleClick.bind(Object(me.a)(a)),e.dispatch(ra(a.props.messenger,a.props.login.id)),a.props.people.done||e.dispatch(Ie(e.people.filters,"false")),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(e,t,a){var n=0;this.props.people.data.map(function(e){return t===e.NodeIdentity&&(a=n),n++,e}),this.props.dispatch(je(this.props.app,t,a)),this.props.history.push("/profile")}},{key:"render",value:function(){return r.a.createElement(ue.a,{className:"gallery"},r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyMobile),r.a.createElement(he.a.Group,{itemsPerRow:1},this.matchs())),r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyTablet),r.a.createElement(he.a.Group,{itemsPerRow:3},this.matchs())),r.a.createElement(Ee.a,Object.assign({as:ve.a},Ee.a.onlyComputer),r.a.createElement(he.a.Group,{itemsPerRow:4},this.matchs())))}}]),t}(n.Component),va=Object(i.f)(Object(c.b)(function(e){return{matchs:e.matchs,people:e.people,app:e.app,login:e.login,messenger:e.messenger}})(Ea)),ya=function(e){function t(e){var a;Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).state={events:[]};var n={method:"GET",headers:{Authorization:localStorage.getItem("jwt")}};return fetch(ye.api+"/events/history/"+a.props.login.id,n).then(function(e){switch(e.status){case 201:break;case 202:localStorage.removeItem("jwt"),e.json().then(function(e){});break;case 200:e.json().then(function(e){a.setState({events:e})})}}),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(ve.a,null,this.state.events.map(function(e,t){return r.a.createElement("div",{key:t},e.message)})))}}]),t}(r.a.Component),ja=Object(i.f)(Object(c.b)(function(e){return{login:e.login,people:e.people}})(ya)),Oa=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{color:e.color},r.a.createElement("p",null,e.text)))},ka=function(e){function t(e){var a;return Object(le.a)(this,t),(a=Object(se.a)(this,Object(ie.a)(t).call(this,e))).save=function(e){var t=new FormData;t.append("reset-token",a.state.reset_token),t.append("password",a.state.password),t.append("confirm",a.state.confirm),t.append("username",a.state.username),fetch(ye.api+"/reset_password",{method:"PUT",body:t}).then(function(e){200===e.status?a.setState({done:!0}):e.json().then(function(e){a.setState({msg:e.err,error:!0})})})},a.handleChange=function(e,t){a.setState(Object(Le.a)({},t.name,t.value))},a.state={done:!1,error:!1,reset_token:"",password:"",confirm:"",username:""},a.handleChange=a.handleChange.bind(Object(me.a)(a)),a.save=a.save.bind(Object(me.a)(a)),a}return Object(ce.a)(t,e),Object(oe.a)(t,[{key:"componentWillMount",value:function(){var e=Gt(this.props.location.search);this.setState({reset_token:e.reset_token})}},{key:"error",value:function(){if(this.props.app.error)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa,{color:"red",text:this.state.msg}))}},{key:"done",value:function(){if(this.props.app.done)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa,{color:"green",text:"Password has been changed"}))}},{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(ve.a,null,r.a.createElement(Me.a,{key:"grid_password"},r.a.createElement(Me.a.Column,{mobile:16,tablet:16,computer:16},this.error(),this.done()),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Username")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,onChange:this.handleChange,name:"username",value:this.state.username}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"New Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:2,type:"password",onChange:this.handleChange,name:"password",value:this.state.password}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Me.a.Row,null,r.a.createElement(Te.a,{as:"h4"},"Confirm Password")),r.a.createElement(Me.a.Row,null,r.a.createElement(Je.a,{fluid:!0,key:3,type:"password",onChange:this.handleChange,name:"confirm",value:this.state.confirm}))),r.a.createElement(Me.a.Column,{mobile:16,tablet:8,computer:8},r.a.createElement(Fe.a,{onClick:this.save,color:"teal"},"Change Password")))))}}]),t}(r.a.Component),wa=Object(i.f)(Object(c.b)(function(e){return{login:e.login,people:e.people}})(ka)),Ca=function(){return r.a.createElement(c.a,{store:ee},r.a.createElement(s.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:re}),r.a.createElement(ae,{path:"/home",component:Be}),r.a.createElement(ae,{path:"/matchs",component:va}),r.a.createElement(ae,{path:"/history",component:ja}),r.a.createElement(ae,{path:"/user",component:ht}),r.a.createElement(ae,{path:"/profile",component:bt}),r.a.createElement(ae,{path:"/messenger",component:ga}),r.a.createElement(i.b,{path:"/401",component:kt}),r.a.createElement(i.b,{path:"/valid_email",component:Bt}),r.a.createElement(ne,{path:"/login",component:vt}),r.a.createElement(ne,{path:"/register",component:jt}),r.a.createElement(ne,{path:"/forgot",component:ba}),r.a.createElement(ne,{path:"/reset-password",component:wa}),r.a.createElement(ne,{component:kt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ca,null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[285,1,2]]]);
//# sourceMappingURL=main.45233597.chunk.js.map